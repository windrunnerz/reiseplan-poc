{% extends "base.html" %}
{% block title %}Neuen Baustein hinzufÃ¼gen{% endblock %}

{% block sidebar %}
  <div class="page-sidebar-wrapper">
    <aside class="page-sidebar">
      <h3>ğŸ§­ Beispielroute</h3>
      <ol>
        {% for ort in demo_pfad %}
          <li>{{ ort | capitalize }}</li>
        {% endfor %}
      </ol>
      <p style="margin-top: 1em; font-size: 0.9em;">

      </p>
    </aside>
  </div>
{% endblock %}

{% block content %}
  <h2>â• Neuen Baustein hinzufÃ¼gen</h2>

  <form action="{{ url_for('add_baustein') }}" method="post" id="bausteinForm">
    <fieldset>
      <legend>Typ wÃ¤hlen:</legend>
      <label>
        <input type="radio" name="type" value="city" required checked> City
      </label>
      <label style="margin-left: 1em;">
        <input type="radio" name="type" value="route"> Route
      </label>
    </fieldset>

    <!-- ğŸ™ï¸ City-Felder -->
    <div id="cityFields" class="form-section">
      <h3>ğŸ™ï¸ City-Baustein</h3>
      <label for="ort">Ort:</label>
      <input type="text" id="ort" name="ort">

      <label for="text">Beschreibung:</label>
      <textarea id="city_text" name="city_text" rows="3" placeholder="Beschreibung des Ortes..."></textarea>

      <label for="image">Bilddatei (DemnÃ¤chst):</label>
      <input type="text" id="image" name="image" placeholder="roskilde.jpg">
    </div>

    <!-- ğŸ›£ï¸ Route-Felder -->
    <div id="routeFields" class="form-section" style="display: none;">
      <h3>ğŸ›£ï¸ Route-Baustein</h3>
      <label for="start_ort">Start-Ort:</label>
      <select id="start_ort" name="start_ort" required>
          {% for ort in start_orte %}
          <option value="{{ ort | lower }}">{{ ort }}</option>
          {% endfor %}
      </select>

      <label for="ziel_ort">Ziel-Ort:</label>
      <select id="ziel_ort" name="ziel_ort" required>
          {% for ort in ziel_orte %}
          <option value="{{ ort | lower }}">{{ ort }}</option>
          {% endfor %}
      </select>

      <label for="route_text">Beschreibung:</label>
      <textarea id="route_text" name="route_text" rows="3" placeholder="Beschreibung der Route..."></textarea>
    </div>

    <div class="mt-2">
      <button type="submit" class="btn">Speichern</button>
      <button id="cancelBtn" class="btn cancel" type="button">Abbrechen</button>
    </div>
  </form>

  <script>
    // Umschalten zwischen City- und Route-Feldern
    const radios = document.querySelectorAll('input[name="type"]');
    const cityFields = document.getElementById('cityFields');
    const routeFields = document.getElementById('routeFields');

    radios.forEach(radio => {
      radio.addEventListener('change', (event) => {
        const selected = event.target.value;
        if (selected === 'city') {
          cityFields.style.display = 'block';
          routeFields.style.display = 'none';
        } else {
          cityFields.style.display = 'none';
          routeFields.style.display = 'block';
        }
      });
    });

    document.getElementById('cancelBtn').addEventListener('click', () => {
      window.location.href = "{{ url_for('index') }}";
    });
  </script>
{% endblock %}
